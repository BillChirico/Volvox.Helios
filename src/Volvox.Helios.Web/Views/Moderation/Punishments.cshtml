@model Volvox.Helios.Web.ViewModels.Moderation.PunishmentsViewModel

<form method="POST">
    <section class="container">
        <div class="table table-responsive">
            <table asp-for="Punishments" class="table table-responsive table-striped table-bordered">

                <thead>
                    <tr>
                        <td>Punishment Type</td>
                        <td>Punishment Duration mins</td>
                        <td>Warning Type</td>
                        <td>Warning Threshold</td>
                        <td>Role</td>
                        <td>Remove</td>
                    </tr>
                </thead>

                <tbody id="PunishmentTableBody">
                    @{
                        var i = 0;
                        foreach (var punishment in Model.Punishments)
                        {
                            Html.ViewData.TemplateInfo.HtmlFieldPrefix = $"Punishments[{i}]";
                            <partial name="_PunishmentRowReadonly" , for="@punishment" />
                            i++;
                        }
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="6">
                            <button id="addPunishment" type="button" class="btn btn-primary" data-toggle="tooltip" data-original-title="Add more controls"><i class="glyphicon glyphicon-plus-sign"></i>&nbsp; Add&nbsp;</button>
                        </th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </section>
    <div class="form-group">
        <input type="submit" value="Save" class="btn btn-success" />
    </div>
</form>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>  
        $(document).ready(function () {
            $("#addPunishment").click(function () {
                $.ajax({
                    url: "NewPunishmentRow",
                    cache: false,
                    success: function (html) { $("#PunishmentTableBody").append(html); }
                });
                return false;
            });

        });

        function RemoveTableRow(e) {
            $(e.target).closest("tr").remove();
        }
    </script>
}

<style>
    .table-remove {
        color: #700;
        cursor: pointer;
    }

    table-remove:hover {
        color: #f00;
    }
</style>